<div ng-controller="modelTermCtrl">

<!--
  <style>
    .tableFixHead {
      overflow-y: auto;
      height: 800px;
    }
    .tableFixHead thead th {
      position: sticky;
      top: 0;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th,
    td {
      padding: 8px 16px;
      border: 1px solid #ccc;
    }
    th {
      background: #eee;
    }
  </style>
  -->

  <br/>
  <div ng-click="updateTermSummary()" class="clickable pull-right">Refresh</div>

  <uib-tabset>

    <uib-tab heading="ValueSets">
      <div class="tableFixHead">
        <table class="table table-bordered">
          <thead>
          <tr><th>Url</th><th>Where defined</th></tr>
          </thead>
          <tbody>
          <tr ng-repeat="(k,v) in hashVsSummary">
            <td>
              <span class = 'clickable' ng-click="viewVS(k)">{{k}}</span></td>
            <td>
              <div ng-repeat = "item in v">
                <div ng-show="item.DGName">
                  DG: <span class="clickable" ng-click="termSelectDG(item)" >{{item.DGName}}</span>.
                  Path: <span class="clickable" ng-click="termSelectDGItem(item)">{{item.path}}</span>
                  <span ng-show = item.options>
                  There are <span class="clickable " ng-click="viewOptions(item)">{{item.options.length}} options</span> defined.
                </span>
                </div>

                <div ng-show="item.compName">
                  Comp: <span class="clickable" ng-click="termSelectComp(item)" >{{item.compName}}</span>.
                  Path: <span class="clickable" ng-click="termSelectCompItem(item)">{{item.path}}</span>
                  <span ng-show = item.options>
                  There are <span class="clickable " ng-click="viewOptions(item)">{{item.options.length}} options</span> defined.
                </span>
                </div>

              </div>
            </td>
          </tr>
          </tbody>

        </table>
      </div>
      <pre>{{hashVsSummary | json}}</pre>

    </uib-tab>
    <uib-tab heading = "DataGroups">


      <div class="pull-right"> CodeableConcepts in the DataGroup. This is only in the DG - not in referenced DGs.
       </div>



      <div class="clearfix"></div>

      <div class="tableFixHead">
        <table class="table table-bordered">
          <thead>
          <tr><th>DG Name</th><th>DG title</th><th>Element path</th>
            <th>Element title</th><th>Element description</th><th>Element ValueSet</th><th># options</th></tr>
          </thead>
          <tbody>
          <tr ng-repeat="item in termSummary">
            <td>
              <span class="clickable" ng-click="termSelectDG(item)">{{item.DGName}}</span>
            </td>
            <td>{{item.DGTitle}}</td>

            <td>
              <span class="clickable" ng-click="termSelectDGItem(item)">{{item.path}}</span>
            </td>



            <td>{{item.title}}</td>
            <td>{{item.description}}</td>
            <td>
              <span class = 'clickable' ng-click="viewVS(item.valueSet)">{{item.valueSet}}</span>

            </td>
            <td>
              <span class="clickable " ng-click="viewOptions(item)">{{item.options.length}}</span>
            </td>
          </tr>
          </tbody>


        </table>
      </div>
    </uib-tab>
    <uib-tab heading = "Compositions">
      <div class="pull-right"> Composition overrides. These are (or should be) generally Terminology.</div>


      <table class="table table-bordered">
      <thead>
        <tr>
          <th>Composition name</th><th>Path</th><th>Title</th><th>Description</th><th>ValueSet</th><th>Previous ValueSet</th>
        </tr>
      </thead>
      <tbody>
      <tr ng-repeat="item in compTermSummary">
        <td>{{item.compName}}</td>
        <td>{{item.ov.path}}</td>
        <td>{{item.ov.title}}</td>
        <td>{{item.ov.description}}</td>
        <td>
          <span class = 'clickable' ng-click="viewVS(item.ov.valueSet)">{{item.ov.valueSet}}</span>

        </td>
        <td>
          <span class = 'clickable' ng-click="viewVS(item.ov.oldValueSet)">{{item.ov.oldValueSet}}</span>

        </td>
      </tr>
      </tbody>
      </table>

    </uib-tab>

  </uib-tabset>


</div>


