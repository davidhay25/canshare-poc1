<div>

  <div class="modal-header">
    <div class="row">
      <div class="col-md-8 col-sm-8">
        <h3 class="modal-title">
          Edit DG Item
        </h3>
      </div>


      <div class="col-md-4 col-sm-4">

        <button ng-show="input.path"
                class="btn btn-primary pull-right" ng-click="save()">Close</button>

        <button  class="btn btn-link pull-right" ng-click="$dismiss()">Cancel</button>


      </div>
    </div>

  </div>
  <div class="modal-body">
    <uib-tabset>
      <uib-tab heading="Details">
        <table class="table-bordered table table-condensed">
          <tr>
            <td>Path</td>
<!--
            <td><input type="text"
                       ng-blur="setTitle(input.path)" ng-disabled="! isNew" class="form-control" ng-model="input.path"/> </td>
-->
            <td><input type="text" ng-blur="setTitle(input.path)"
                       ng-disabled="! isNew" class="form-control" ng-model="input.path"/> </td>

          </tr>
          <tr>
            <td>Type</td>
            <td>
              <div class="row">
                <div class="col-md-10">
                  <input type="text" ng-model="input.selectedType"
                         typeahead-editable = "false"
                         uib-typeahead="type for type in allTypes | filter:$viewValue"
                         class="form-control" />

                  <!--
                  <select  ng-disabled="! isNew" ng-model="input.type" class="form-control"
                           ng-options="typ for typ in allTypes"></select>
                  -->

                </div>
                <div class="col-md-2">
                  <button class="btn btn-link" ng-click="changeType()">Dialog</button>
                </div>
              </div>

               </td>
          </tr>

          <tr>
            <td>Title</td>
            <td><input type="text" class="form-control" ng-model="input.title"/> </td>
          </tr>
          <tr>
            <td>Description</td>
            <td><textarea class="form-control" ng-model="input.description"></textarea> </td>
          </tr>

          <tr>
            <td>Cardinality</td>
            <td>

              <div class="btn-group">
                <label class="btn btn-default" ng-model="input.mult" uib-btn-radio="'0..0'">0..0</label>
                <label class="btn btn-default" ng-model="input.mult" uib-btn-radio="'0..1'">0..1</label>
                <label class="btn btn-default" ng-model="input.mult" uib-btn-radio="'0..*'">0..*</label>
                <label class="btn btn-default" ng-model="input.mult" uib-btn-radio="'1..1'">1..1</label>
                <label class="btn btn-default" ng-model="input.mult" uib-btn-radio="'1..*'">1..*</label>

              </div>


            </td>
          </tr>

          <tr ng-show="input.selectedType == 'CodeableConcept'">
            <td>ValueSet</td>

            <td>
              <input type="text"
                       class="form-control" ng-model="input.valueSet"/>
            </td>


          </tr>

          <tr>
            <td>Notes</td>
            <td>
              <textarea ng-model="input.notes" class="form-control"></textarea>
            </td>
          </tr>


          <tr>
            <td>Control Hint</td>
            <td>
              <span ng-repeat = "opt in qControlOptions">
                  <input type="radio"
                         ng-change="setControlHint(selectedNode.data.ed,opt)"
                         ng-model="input.controlHint" value="{{opt}}"> {{opt}}
                </span>

            </td>
          </tr>

          <tr ng-show="isFixedType(input.selectedType)">
            <td>Fixed value</td>
            <td>

              <div class="clickable pull-right" ng-click="setFixedValue('fixed')">Edit</div>
              <div style="margin-right: 8px" class="clickable pull-right" ng-click="clearFixedValue('fixed')">Clear</div>



              {{fixedDisplay}}

            </td>
          </tr>
          <tr ng-show="isFixedType(input.selectedType)">
            <td>Default value</td>
            <td>

              <div class="clickable pull-right" ng-click="setFixedValue('default')">Edit</div>
              <div style="margin-right: 8px" class="clickable pull-right" ng-click="clearFixedValue('default')">Clear</div>



              {{defaultDisplay}}

            </td>
          </tr>



          <tr>
            <td>Hide in Q</td>
            <td><checkbox ng-model="input.hideInQ"> </td>
          </tr>

          <tr>
            <td>Source reference</td>
            <td><input type="text" class="form-control" ng-model="input.sourceReference"/> </td>
          </tr>

        </table>

      </uib-tab>

      <uib-tab ng-show="input.selectedType == 'CodeableConcept'">
        <uib-tab-heading>Options <span class="badge">{{options.length}}</span> </uib-tab-heading>

        <uib-tabset>
          <uib-tab heading="Current List">
            <table class="table table-bordered">
              <tr><th>Code</th><th>Display</th><th>FSN</th></tr>
              <tr ng-repeat="row in options">
                <td>{{row.code}}</td>
                <td>{{row.display}}</td>
                <td>{{row.fsn}}</td>
              </tr>
            </table>

          </uib-tab>

          <uib-tab heading="Update list (SNOMED)" >
            <div class="row">
              <div class="col-sm-1 col-md-1">

              </div>
              <div class="col-sm-10 col-md-10">
                <em>Paste in selection from spreadsheet. 3 cols: code, display, FSN.</em>
                <br/>
                <textarea class="form-control" rows = "8" ng-model="input.optionsSnomed"></textarea>

                <button class="btn-link btn pull-right" ng-click="parseSnomed(input.optionsSnomed)">Parse SNOMED</button>

              </div>
            </div>
          </uib-tab>

          <uib-tab heading="Update list (text)">
            <div class="row">
              <div class="col-sm-1 col-md-1">

              </div>
              <div class="col-sm-10 col-md-10">
                <em>A simple list of terms</em>
                <textarea class="form-control"
                          rows = "8" ng-model="input.optionsText"></textarea>

                <button class="btn-link btn pull-right" ng-click="parseList(input.optionsText)">Parse Text</button>
              </div>
            </div>
          </uib-tab>

        </uib-tabset>


      </uib-tab>


      <uib-tab ng-show="input.selectedType == 'Quantity'">
        <uib-tab-heading>Units <span class="badge">{{units.length}}</span> </uib-tab-heading>

          <table class="table-bordered">
            <tr ng-repeat = "unit in units track by $index">
              <td>{{unit}}</td>
              <td><i class="glyphicon glyphicon-minus pull-right clickable"
                     ng-click="deleteUnit($index)"></i></td>
            </tr>
            <tr>
              <td><input type="text" class="form-control" ng-model="input.unit"/> </td>
              <td><i class="glyphicon glyphicon-plus pull-right clickable"
                     ng-click="addUnit(input.unit)"></i></td>
            </tr>
          </table>
      </uib-tab>


      <uib-tab heading="Json">
        <pre>{{item | json}}</pre>
      </uib-tab>

      <uib-tab heading="All elements in DG">
        <br/>
        <table class="table-condensed table table-bordered">
          <tr ng-repeat="item in fullElementList">
            <td>{{item.ed.path | dropFirstInPath}}</td>
            <td>{{item.ed.title}}</td>
            <td>{{item.ed.description}}</td>
          </tr>
        </table>
      </uib-tab>
    </uib-tabset>


  </div>
  <div class="modal-header">

    </div>
</div>