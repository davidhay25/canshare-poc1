


<div ng-show="entry.type == 'group'">
  <div class="group">{{item.title }}</div>
</div>

<div ng-show="entry.type == 'leaf'">
  <div ng-class="{leaf:true, disabled:entry.isDisabled}">
    <div style="cursor: pointer" ng-click="onFocus(entry)">
      {{entry.title }}

    </div>

    <div style="padding-left: 15px; padding-right: 15px" ng-switch="entry.item.type">

      <div ng-switch-when = "choice" >


        <div ng-show="entry.ed.fixedCoding">
          <div ng-click="onFocus(entry)">
            Fixed value: {{entry.ed.fixedCoding.code}} | {{entry.ed.fixedCoding.display}} | {{entry.ed.fixedCoding.system}}
          </div>



        </div>


        <div ng-hide="entry.ed.fixedCoding">

        <!-- Just have radio & dropdown for now...-->
        <div ng-show="entry.ed.controlHint == 'radio'">
          <div ng-repeat="concept in getOptions(entry.item)">
            <input type="radio" ng-model="dataEntered[entry.linkId]"
                   ng-focus="onFocus(entry)"
                   ng-change = "dataUpdated(entry.item)"
                    ng-value="{{concept}}"/> {{concept.display}}
          </div>
        </div>

          <div ng-show="entry.ed.controlHint == 'check-box'">
            <div ng-repeat="concept in getOptions(entry.item)">
              <input type="checkbox" ng-model="dataEntered[entry.linkId+$index]"
                     ng-focus="onFocus(entry)"
                     ng-change = "dataUpdated(entry.item)"
                     ng-value="{{concept}}"/> {{concept.display}}
            </div>
            <em>This is not working in the same way as the CSIRO renderer</em>
          </div>



        <!-- Default is the drop down-->
        <div ng-hide=" entry.ed.controlHint == 'radio' || entry.ed.controlHint == 'check-box'">
          <select class="form-control"  ng-model="dataEntered[entry.linkId]"
                  ng-focus="onFocus(entry.item)"
                  ng-change = "dataUpdated(entry.item)"
                  ng-options="concept.display for concept in getOptions(entry.item)">
          </select>

        </div>


      </div>



      </div>

      <div ng-switch-when = "quantity">

        <div class="row">
          <div class="col-md-10">
            <input type="number" class="form-control"
                   ng-focus="onFocus(entry.item)"
                   ng-blur = "dataUpdated(entry.item)"
                   ng-model="dataEntered[entry.linkId]"/>
          </div>
          <div class="col-md-2">
            {{entry.ed.units[0]}}
          </div>
        </div>





      </div>

      <div ng-switch-when = "boolean" >

        <input type="radio" ng-model="dataEntered[entry.linkId]"
               ng-focus="onFocus(entry)"
               name = "{{entry.linkId}}"
               ng-change = "dataUpdated(entry.item)"
               ng-value="yes"/> Yes

        <input type="radio" ng-model="dataEntered[entry.linkId]"
               ng-focus="onFocus(entry)"
               name = "{{entry.linkId}}"
               ng-change = "dataUpdated(entry.item)"
               ng-value="no"/> No

      </div>

      <div ng-switch-when="date">
        <input ng-change = "dataUpdated(entry.item)" class="form-control" type="date" ng-model="dataEntered[entry.linkId]">
      </div>

      <div ng-switch-when="dateTime">
        <input ng-change = "dataUpdated(entry.item)" class="form-control" type="datetime-local" ng-model="dataEntered[entry.linkId]">

<!--
        <p class="input-group">

          <input type="text" class="form-control" uib-datepicker-popup="dd-MMMM-yyyy"
                 ng-model="dataEntered[entry.linkId]" is-open="datePopup[entry.linkId].opened"
                 ng-focus="onFocus(cell)"
                 ng-change = "dataUpdated(entry.item)"/>

          <span class="input-group-btn">
                  <button type="button" class="btn btn-default" ng-click="openDate(entry.linkId)">
                      <i class="glyphicon glyphicon-calendar"></i>
                  </button>
                </span>

        </p>

        -->


      </div>

      <div ng-switch-default>

        <input class="form-control"

               ng-focus="onFocus(entry)"
               ng-change = "dataUpdated(entry.item)"
               placeholder="{{cell.meta.placeholder}}"
               ng-model="dataEntered[entry.linkId]"/>



      </div>


    </div>

    <div ng-repeat="ew in entry.ed.enableWhen" ng-show="entry.isDisabled">
      <em>{{ew.source}}{{ew.operator}}{{ew.value.display}}</em>

    </div>


  </div>

</div>

<br/>
